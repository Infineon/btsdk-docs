<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Cypress WICED CYW208XX: Scanning</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="font-family:verdana;">
    <table border='0' cellpadding='0' cellspacing='0' width="98%">
      <tr style="height:20px"><td>&nbsp;</td></tr>
      <tr style="border-collapse: collapse; padding: 0;">
        <td style="width:20px"></td>
        <td style="width:117px"><img src="cy_logo.png" alt="Cypress Logo" /></td>
        <td style="width:20px;background-image:url('cy_logo_line.png');"></td>
        <td style="vertical-align:middle; text-align:center; font: bold 25px/100% Verdana, Arial, Helvetica, sans-serif;background-image:url('cy_logo_line.png');">
        WICED<sup><font size="-1">&reg;</font></sup> BT SDK v2.5 - Documentation
        </td>
        <td style="width:20px"></td>
        <td style="width:1px"><img src="wiced_logo.png" alt="WICED Logo" /></td>
      </tr>
      <tr><td>&nbsp;</td></tr>
    </table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Components</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__ble__functions__scan.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Scanning<div class="ingroups"><a class="el" href="group__group__ble__functions.html">Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac2aa0e611a70b09bfc6c4c48b99abb95"><td class="memItemLeft" align="right" valign="top">wiced_result_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a> (<a class="el" href="group__group__dev__enums.html#gafaba53a20aad0fb7a2536d9c2df7c96e">wiced_bt_ble_scan_type_t</a> scan_type, wiced_bool_t duplicate_filter_enable, <a class="el" href="group__group__ble__structures.html#ga4f404f522b16d7a20986f252f17eac1d">wiced_bt_ble_scan_result_cback_t</a> *p_scan_result_cback)</td></tr>
<tr class="memdesc:gac2aa0e611a70b09bfc6c4c48b99abb95"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API allows the device to register a callback to receive <em>connectable</em> ADV packets from slave devices.  <a href="#gac2aa0e611a70b09bfc6c4c48b99abb95">More...</a><br /></td></tr>
<tr class="separator:gac2aa0e611a70b09bfc6c4c48b99abb95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaead34268d19ff7ea316c687d15714ee9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__dev__structures.html#gaebfc7a7f17241ffdaf1a70efc43ffb57">wiced_bt_dev_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__ble__functions__scan.html#gaead34268d19ff7ea316c687d15714ee9">wiced_bt_ble_observe</a> (wiced_bool_t start, uint8_t duration, <a class="el" href="group__group__ble__structures.html#ga4f404f522b16d7a20986f252f17eac1d">wiced_bt_ble_scan_result_cback_t</a> *p_scan_result_cback)</td></tr>
<tr class="memdesc:gaead34268d19ff7ea316c687d15714ee9"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API allows the device to register a callback to receive both connectable and non-connectable ADV packets.  <a href="#gaead34268d19ff7ea316c687d15714ee9">More...</a><br /></td></tr>
<tr class="separator:gaead34268d19ff7ea316c687d15714ee9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga397017f8e317d9c93785e719d7ca07cf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__dev__enums.html#gafaba53a20aad0fb7a2536d9c2df7c96e">wiced_bt_ble_scan_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__ble__functions__scan.html#ga397017f8e317d9c93785e719d7ca07cf">wiced_bt_ble_get_current_scan_state</a> (void)</td></tr>
<tr class="memdesc:ga397017f8e317d9c93785e719d7ca07cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current scan state that was set using <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a>.  <a href="#ga397017f8e317d9c93785e719d7ca07cf">More...</a><br /></td></tr>
<tr class="separator:ga397017f8e317d9c93785e719d7ca07cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d62204cf6ab289f977215c08d5864ca"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__ble__functions__scan.html#ga8d62204cf6ab289f977215c08d5864ca">wiced_bt_ble_check_advertising_data</a> (uint8_t *p_adv, <a class="el" href="group__group__ble__enums.html#ga3764eb118b409b406eedbb158262a91f">wiced_bt_ble_advert_type_t</a> <a class="el" href="wiced__bt__mesh__provision_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>, uint8_t *p_length)</td></tr>
<tr class="memdesc:ga8d62204cf6ab289f977215c08d5864ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">After receiving ADV data from another device using <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a> or <a class="el" href="group__group__ble__functions__scan.html#gaead34268d19ff7ea316c687d15714ee9">wiced_bt_ble_observe</a>, this API can optionally be used to parse the received ADV data.  <a href="#ga8d62204cf6ab289f977215c08d5864ca">More...</a><br /></td></tr>
<tr class="separator:ga8d62204cf6ab289f977215c08d5864ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabdb60d361b6a6527e0f02bfb4cd61138"><td class="memItemLeft" align="right" valign="top">wiced_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__ble__functions__scan.html#gabdb60d361b6a6527e0f02bfb4cd61138">wiced_bt_ble_update_scanner_white_list</a> (wiced_bool_t <a class="el" href="wiced__bt__mesh__core_8h.html#a8cd82571c461a092b7e41ef838c6082c">add</a>, wiced_bt_device_address_t remote_bda, wiced_bt_ble_address_type_t addr_type)</td></tr>
<tr class="memdesc:gabdb60d361b6a6527e0f02bfb4cd61138"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add or remove a device from the scanner white list.  <a href="#gabdb60d361b6a6527e0f02bfb4cd61138">More...</a><br /></td></tr>
<tr class="separator:gabdb60d361b6a6527e0f02bfb4cd61138"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga524efdcf8f398f3bdfe71081d3882d06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__ble__functions__scan.html#ga524efdcf8f398f3bdfe71081d3882d06">wiced_bt_ble_update_scanner_filter_policy</a> (<a class="el" href="group__group__ble__enums.html#ga6d09736846bcb960a4fd36934d24bfef">wiced_bt_ble_scanner_filter_policy_t</a> scanner_policy)</td></tr>
<tr class="memdesc:ga524efdcf8f398f3bdfe71081d3882d06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Controls the use of the scanner white list.  <a href="#ga524efdcf8f398f3bdfe71081d3882d06">More...</a><br /></td></tr>
<tr class="separator:ga524efdcf8f398f3bdfe71081d3882d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga8d62204cf6ab289f977215c08d5864ca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* wiced_bt_ble_check_advertising_data </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_adv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__ble__enums.html#ga3764eb118b409b406eedbb158262a91f">wiced_bt_ble_advert_type_t</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>p_length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>After receiving ADV data from another device using <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a> or <a class="el" href="group__group__ble__functions__scan.html#gaead34268d19ff7ea316c687d15714ee9">wiced_bt_ble_observe</a>, this API can optionally be used to parse the received ADV data. </p>
<p>For example, if the application wants to check for the existence of an ASCII string name contained in the ADV packet, it would pass the value BTM_BLE_ADVERT_TYPE_NAME_COMPLETE into the 'type' param. If the ADV packet contains the proper field, the function will return a pointer to the ASCII string within the given ADV packet.</p>
<p>Refer to <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a> header for sample code using this API.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_adv</td><td>pointer to raw ADV data received </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>ADV data type to parse </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">p_length</td><td>if found, length of data, else NULL</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>If found, pointer to start of requested advertisement data.</li>
<li>NULL if requested data type not found. </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="ga397017f8e317d9c93785e719d7ca07cf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__dev__enums.html#gafaba53a20aad0fb7a2536d9c2df7c96e">wiced_bt_ble_scan_type_t</a> wiced_bt_ble_get_current_scan_state </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current scan state that was set using <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">void</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>BTM_BLE_SCAN_TYPE_NONE no scan running</li>
<li>BTM_BLE_SCAN_TYPE_HIGH_DUTY high duty cycle scan</li>
<li>BTM_BLE_SCAN_TYPE_LOW_DUTY low duty cycle scan </li>
</ul>
</dd></dl>

</div>
</div>
<a class="anchor" id="gaead34268d19ff7ea316c687d15714ee9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__dev__structures.html#gaebfc7a7f17241ffdaf1a70efc43ffb57">wiced_bt_dev_status_t</a> wiced_bt_ble_observe </td>
          <td>(</td>
          <td class="paramtype">wiced_bool_t&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__ble__structures.html#ga4f404f522b16d7a20986f252f17eac1d">wiced_bt_ble_scan_result_cback_t</a> *&#160;</td>
          <td class="paramname"><em>p_scan_result_cback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API allows the device to register a callback to receive both connectable and non-connectable ADV packets. </p>
<p>It is fundamentally the same as the API <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a>, except that the scan results are filtered to allow non-connectable packets. Furthermore, the scan parameters used by the observe API are the 'low_duty' parameters set in <a class="el" href="structwiced__bt__cfg__settings__t.html">wiced_bt_cfg_settings_t</a>, which is passed to <a class="el" href="group__wicedbt___framework.html#ga5ffccad07a041f9f18a6d2f132d4edf5">wiced_bt_stack_init</a>.</p>
<p>Refer to <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a> for an example of the callback to be used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">start</td><td>WICED_TRUE==start, WICED_FALSE==stop </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">duration</td><td>num_seconds to scan </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_scan_result_cback</td><td>callback to receive packets asynchronously</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>WICED_SUCCESS</li>
<li>WICED_ERROR</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This API should not be used at the same time as <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="gac2aa0e611a70b09bfc6c4c48b99abb95"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wiced_result_t wiced_bt_ble_scan </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group__dev__enums.html#gafaba53a20aad0fb7a2536d9c2df7c96e">wiced_bt_ble_scan_type_t</a>&#160;</td>
          <td class="paramname"><em>scan_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wiced_bool_t&#160;</td>
          <td class="paramname"><em>duplicate_filter_enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__ble__structures.html#ga4f404f522b16d7a20986f252f17eac1d">wiced_bt_ble_scan_result_cback_t</a> *&#160;</td>
          <td class="paramname"><em>p_scan_result_cback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API allows the device to register a callback to receive <em>connectable</em> ADV packets from slave devices. </p>
<p>It is fundamentally the same as the API <a class="el" href="group__group__ble__functions__scan.html#gaead34268d19ff7ea316c687d15714ee9">wiced_bt_ble_observe</a>, except that the scan results are filtered to only allow connectable packets. The scan interval, window, duration, and type (active or passive), are initialized in <a class="el" href="structwiced__bt__cfg__settings__t.html">wiced_bt_cfg_settings_t</a> upon calling the stack initialization API (<a class="el" href="group__wicedbt___framework.html#ga5ffccad07a041f9f18a6d2f132d4edf5">wiced_bt_stack_init</a>). The packets received in the callback can be limited to a small, known set of devices using <a class="el" href="group__group__ble__functions__scan.html#ga524efdcf8f398f3bdfe71081d3882d06">wiced_bt_ble_update_scanner_filter_policy</a>.</p>
<p>Below is an example of how to start receiving scan results in a callback and print the name of the advertised device if found in the received packet:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> scan_cback( <a class="code" href="structwiced__bt__ble__scan__results__t.html">wiced_bt_ble_scan_results_t</a> *scan_res, uint8_t *adv_data )</div>
<div class="line">{</div>
<div class="line">    uint8_t length;</div>
<div class="line">    uint8_t *p_data;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> ( p_scan_result )</div>
<div class="line">    {</div>
<div class="line">        p_data = <a class="code" href="group__group__ble__functions__scan.html#ga8d62204cf6ab289f977215c08d5864ca">wiced_bt_ble_check_advertising_data</a>( p_adv_data,</div>
<div class="line">            <a class="code" href="group__group__ble__enums.html#gga4e721fb996eccc386b0311f022675eb2a9fe2bdd4de77389d7202a38ca3f941ba">BTM_BLE_ADVERT_TYPE_NAME_COMPLETE</a>, &amp;length );</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(length)</div>
<div class="line">        {</div>
<div class="line">            WICED_BT_TRACE(<span class="stringliteral">&quot;%B %s RSSI: %i\r\n&quot;</span>,</div>
<div class="line">                p_scan_result-&gt;remote_bd_addr, (<span class="keywordtype">char</span> *)p_data,</div>
<div class="line">                p_scan_result-&gt;rssi );</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            WICED_BT_TRACE(<span class="stringliteral">&quot;%B UNK RSSI: %i\r\n&quot;</span>,</div>
<div class="line">                p_scan_result-&gt;remote_bd_addr, p_scan_result-&gt;rssi );</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        WICED_BT_TRACE( <span class="stringliteral">&quot;Scan completed\r\n&quot;</span> );</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">{</div>
<div class="line">    <a class="code" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a>( <a class="code" href="group__group__dev__enums.html#gga5962ac95c03367e51789815eadcb25a6a3a7388c7182a40c8e867941e2cf2a816">BTM_BLE_SCAN_TYPE_HIGH_DUTY</a>, WICED_TRUE, scan_cback);</div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scan_type</td><td><ul>
<li>BTM_BLE_SCAN_TYPE_NONE: disable scan</li>
<li>BTM_BLE_SCAN_TYPE_HIGH_DUTY: use scan params prefixed high_duty_conn_scan_*</li>
<li>BTM_BLE_SCAN_TYPE_LOW_DUTY: use scan params prefixed low_duty_conn_scan_* </li>
</ul>
</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">duplicate_filter_enable</td><td>WICED_TRUE==enable, WICED_FALSE==disable </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">p_scan_result_cback</td><td>callback to receive packets asynchronously</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>WICED_BT_PENDING if successfully initiated</li>
<li>WICED_BT_BUSY if already in progress</li>
<li>WICED_BT_ILLEGAL_VALUE if parameter(s) are out of range</li>
<li>WICED_BT_NO_RESOURCES if could not allocate resources to start the command</li>
<li>WICED_BT_WRONG_MODE if the device is not up.</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This API should not be used at the same time as <a class="el" href="group__group__ble__functions__scan.html#gaead34268d19ff7ea316c687d15714ee9">wiced_bt_ble_observe</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ga524efdcf8f398f3bdfe71081d3882d06"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wiced_bt_ble_update_scanner_filter_policy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__group__ble__enums.html#ga6d09736846bcb960a4fd36934d24bfef">wiced_bt_ble_scanner_filter_policy_t</a>&#160;</td>
          <td class="paramname"><em>scanner_policy</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Controls the use of the scanner white list. </p>
<p>Using <a class="el" href="group__group__ble__functions__scan.html#gac2aa0e611a70b09bfc6c4c48b99abb95">wiced_bt_ble_scan</a> and <a class="el" href="group__group__ble__functions__scan.html#gaead34268d19ff7ea316c687d15714ee9">wiced_bt_ble_observe</a> will by default allow any device's advertising packets to be received (dropping directed ADV packets whose target address does not match our local address). Enabling the whitelist allows the callback to only be triggered in the event that an ADV packet is scanned from a small list of devices.</p>
<p>Directed packets using an RPA are optionally included in the search results. The default behavior is that directed ADV will always be dropped if the target address does not match the local address. When RPA (rotating address) is in use, we must then add the option of allowing directed packets to an RPA through the filter so that the host can resolve the address (if the address resolution is occurring on the host side).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">scanner_policy</td><td><a class="el" href="group__group__ble__enums.html#ga6d09736846bcb960a4fd36934d24bfef">wiced_bt_ble_scanner_filter_policy_t</a><ul>
<li>BTM_BLE_SCANNER_FILTER_ALL_ADV_RSP: (default) WL OFF, drops dir to RPA</li>
<li>BTM_BLE_SCANNER_FILTER_WHITELIST_ADV_RSP: WL ON, drops dir to RPA</li>
<li>BTM_BLE_SCANNER_FILTER_ALL_RPA_DIR_ADV_RSP: WL OFF, passes dir to RPA</li>
<li>BTM_BLE_SCANNER_FILTER_WHITELIST_RPA_DIR_ADV_RSP: WL ON, passes dir to RPA</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<a class="anchor" id="gabdb60d361b6a6527e0f02bfb4cd61138"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wiced_bool_t wiced_bt_ble_update_scanner_white_list </td>
          <td>(</td>
          <td class="paramtype">wiced_bool_t&#160;</td>
          <td class="paramname"><em>add</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wiced_bt_device_address_t&#160;</td>
          <td class="paramname"><em>remote_bda</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">wiced_bt_ble_address_type_t&#160;</td>
          <td class="paramname"><em>addr_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add or remove a device from the scanner white list. </p>
<p>Behavior of white list is controlled by <a class="el" href="group__group__ble__functions__scan.html#ga524efdcf8f398f3bdfe71081d3882d06">wiced_bt_ble_update_scanner_filter_policy</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">add</td><td>WICED_TRUE==add, WICED_FALSE==remove </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">remote_bda</td><td>address of device to add/remove </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">addr_type</td><td>wiced_bt_ble_address_type_t<ul>
<li>BLE_ADDR_PUBLIC</li>
<li>BLE_ADDR_RANDOM</li>
<li>BLE_ADDR_PUBLIC_ID</li>
<li>BLE_ADDR_RANDOM_ID</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>WICED_TRUE success</li>
<li>WICED_FALSE error, transport buffer allocation failure</li>
</ul>
</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This API cannot be used while the white list is in use. If the device is currently scanning using the white list, disable it before using this API. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright Cypress Semiconductor.</li>
  </ul>
</div>
</body>
</html>
