<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AIROC&trade; CYW208XX: AIROC Sleep Configuration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="font-family:verdana;">
    <table border='0' cellpadding='0' cellspacing='0' width="98%">
      <tr style="height:20px"><td>&nbsp;</td></tr>
      <tr style="border-collapse: collapse; padding: 0;">
        <td style="width:20px"></td>
        <td style="width:117px"><img src="IFX_LOGO_RGB.png" alt="Infineon Logo" /></td>
        <td style="width:40px"></td>
        <td style="vertical-align:middle; text-align:left; font: bold 25px/100% Verdana, Arial, Helvetica, sans-serif;">
        AIROC<sup><font size="-1">&trade;</font></sup> BTSDK v4.2 - Documentation
        </td>
        <td style="width:20px"></td>
      </tr>
      <tr><td>&nbsp;</td></tr>
    </table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="modules.html"><span>Components</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__wiced__sleep__config.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#groups">Modules</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">AIROC Sleep Configuration<div class="ingroups"><a class="el" href="group___hardware_drivers.html">Hardware Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This driver provides simplified access to the AIROC sleep framework on the CYW20819 device.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="groups"></a>
Modules</h2></td></tr>
<tr class="memitem:group__group__sleep__data__structures"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sleep__data__structures.html">Group_sleep_data_structures</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sleep__defines"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sleep__defines.html">Group_sleep_defines</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:group__group__sleep__enums"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__sleep__enums.html">Group_sleep_enums</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga3e452b8636fb1cbd0c16b8eb720faf7f"><td class="memItemLeft" align="right" valign="top">typedef uint32_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wiced__sleep__config.html#ga3e452b8636fb1cbd0c16b8eb720faf7f">wiced_sleep_allow_check_callback</a> )(<a class="el" href="group__group__sleep__enums.html#ga92c8bca5e6e3381001ed2355d28aa2b0">wiced_sleep_poll_type_t</a> <a class="el" href="wiced__bt__mesh__provision_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>)</td></tr>
<tr class="memdesc:ga3e452b8636fb1cbd0c16b8eb720faf7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prototype for the callback function that needs to be defined by the application.  <a href="#ga3e452b8636fb1cbd0c16b8eb720faf7f">More...</a><br /></td></tr>
<tr class="separator:ga3e452b8636fb1cbd0c16b8eb720faf7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf45fdcacf1587e936d10e03bc23544bc"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wiced__sleep__config.html#gaf45fdcacf1587e936d10e03bc23544bc">wiced_sleep_post_sleep_callback</a> )(wiced_bool_t restore_configuration)</td></tr>
<tr class="memdesc:gaf45fdcacf1587e936d10e03bc23544bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Application implements call back of this type to perform post sleep actions.  <a href="#gaf45fdcacf1587e936d10e03bc23544bc">More...</a><br /></td></tr>
<tr class="separator:gaf45fdcacf1587e936d10e03bc23544bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae16b5586250539a0026a9fef4d71a517"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___result.html#gacfc32ead8a827d53416f01b19eb58310">wiced_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wiced__sleep__config.html#gae16b5586250539a0026a9fef4d71a517">wiced_sleep_configure</a> (<a class="el" href="structwiced__sleep__config__t.html">wiced_sleep_config_t</a> *p_sleep_config)</td></tr>
<tr class="memdesc:gae16b5586250539a0026a9fef4d71a517"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is used to configure various sleep mode parameters (see ) such as interrupt source, GPIO to be used as interrupt etc.  <a href="#gae16b5586250539a0026a9fef4d71a517">More...</a><br /></td></tr>
<tr class="separator:gae16b5586250539a0026a9fef4d71a517"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a0afec9e88e0688a90aba2eee780857"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__sleep__enums.html#ga46069887a0627072cdde146f6ee18e38">wiced_sleep_boot_type_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wiced__sleep__config.html#ga7a0afec9e88e0688a90aba2eee780857">wiced_sleep_get_boot_mode</a> (void)</td></tr>
<tr class="memdesc:ga7a0afec9e88e0688a90aba2eee780857"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is used request the type of reboot.  <a href="#ga7a0afec9e88e0688a90aba2eee780857">More...</a><br /></td></tr>
<tr class="separator:ga7a0afec9e88e0688a90aba2eee780857"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab82a74f26f6856dc94fd3f7f3755d76a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___result.html#gacfc32ead8a827d53416f01b19eb58310">wiced_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wiced__sleep__config.html#gab82a74f26f6856dc94fd3f7f3755d76a">wiced_sleep_enter_hid_off</a> (uint32_t wakeup_time, uint32_t wake_gpio_pin, <a class="el" href="group__group__sleep__enums.html#ga7365a0a0a0a19dc4b53ed5e8afa38481">wiced_sleep_wake_type_t</a> wake_active_mode)</td></tr>
<tr class="memdesc:gab82a74f26f6856dc94fd3f7f3755d76a"><td class="mdescLeft">&#160;</td><td class="mdescRight">This API is used to enter HID OFF mode.  <a href="#gab82a74f26f6856dc94fd3f7f3755d76a">More...</a><br /></td></tr>
<tr class="separator:gab82a74f26f6856dc94fd3f7f3755d76a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a9297d408f3a58cf3c476e9e6d924d3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__group__sleep__enums.html#ga00880bca9f065d09a259eab6b4f98deb">wiced_sleep_wake_reason_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__wiced__sleep__config.html#ga8a9297d408f3a58cf3c476e9e6d924d3">wiced_sleep_hid_off_wake_reason</a> (void)</td></tr>
<tr class="memdesc:ga8a9297d408f3a58cf3c476e9e6d924d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">API to get reset reason.  <a href="#ga8a9297d408f3a58cf3c476e9e6d924d3">More...</a><br /></td></tr>
<tr class="separator:ga8a9297d408f3a58cf3c476e9e6d924d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This driver provides simplified access to the AIROC sleep framework on the CYW20819 device. </p>
<p>The following APIs allow the application layer to easily configure sleep parameters as well as communicate with the device Power Management Unit (PMU). Using this APIs the application can allow or disallow ePDS when asked by the callback from PMU as well as asynchronously enter HID-Off mode.</p>
<p>defgroup group_sleep_defines Defines defgroup group_sleep_enums ENUMs defgroup group_sleep_data_structures Data Structures </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ga3e452b8636fb1cbd0c16b8eb720faf7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t(* wiced_sleep_allow_check_callback)(<a class="el" href="group__group__sleep__enums.html#ga92c8bca5e6e3381001ed2355d28aa2b0">wiced_sleep_poll_type_t</a> <a class="el" href="wiced__bt__mesh__provision_8h.html#a1d127017fb298b889f4ba24752d08b8e">type</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prototype for the callback function that needs to be defined by the application. </p>
<p>PMU will call this function whenever it want to enter low power mode (ePDS). The PMU will pass the parameter value either as WICED_SLEEP_POLL_TIME_TO_SLEEP or WICED_SLEEP_POLL_SLEEP_PERMISSION and the application needs to return appropriate value (see return description)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">type</td><td>Poll type can either be WICED_SLEEP_POLL_TIME_TO_SLEEP or WICED_SLEEP_POLL_SLEEP_PERMISSION (see <a class="el" href="group__group__sleep__enums.html#ga92c8bca5e6e3381001ed2355d28aa2b0" title="Defines the poll type from the PMU. ">wiced_sleep_poll_type_t</a>)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if type == WICED_SLEEP_POLL_TIME_TO_SLEEP, application should return WICED_SLEEP_MAX_TIME_TO_SLEEP. if type == WICED_SLEEP_POLL_SLEEP_PERMISSION, application should return one of the values in wiced_sleep_permission_type_t</dd></dl>
<p>Note:- Application shall return immediately, with the return value specifying whether it allows/disallows sleep. Immediate return is required to allow the maximum time to sleep. Applications shall ensure that all peripheral activity (on PUART, SPI, .. ) is paused before allowing sleep. Any pending activity on the peripherals is lost when the device goes into sleep. </p>

</div>
</div>
<a class="anchor" id="gaf45fdcacf1587e936d10e03bc23544bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* wiced_sleep_post_sleep_callback)(wiced_bool_t restore_configuration)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Application implements call back of this type to perform post sleep actions. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">restore_configuration</td><td>WICED_TRUE - reconfigure configured gpios and re-initialize configured peripherals WICED_FALSE - reconfiguration not required</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae16b5586250539a0026a9fef4d71a517"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___result.html#gacfc32ead8a827d53416f01b19eb58310">wiced_result_t</a> wiced_sleep_configure </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structwiced__sleep__config__t.html">wiced_sleep_config_t</a> *&#160;</td>
          <td class="paramname"><em>p_sleep_config</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API is used to configure various sleep mode parameters (see ) such as interrupt source, GPIO to be used as interrupt etc. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">p_sleep_config</td><td>see </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>WICED_SUCCESS or WICED_ERROR </dd></dl>

</div>
</div>
<a class="anchor" id="gab82a74f26f6856dc94fd3f7f3755d76a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___result.html#gacfc32ead8a827d53416f01b19eb58310">wiced_result_t</a> wiced_sleep_enter_hid_off </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wakeup_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>wake_gpio_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__group__sleep__enums.html#ga7365a0a0a0a19dc4b53ed5e8afa38481">wiced_sleep_wake_type_t</a>&#160;</td>
          <td class="paramname"><em>wake_active_mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API is used to enter HID OFF mode. </p>
<p>The application can call this API at any time when there is not Bluetooth activity</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">wakeup_time</td><td>: wake up time in milliseconds. Application can configure for both GPIO wake and/or timed wake. Forever sleep(i.e. no timed wake) can be configure by setting wakeup_time = 0. The max time is 0x3fffff LPO cycles which is ~128010 milliseconds considering 32.768 KHz LPO. LPO can have 3000ppm error in some HW configurations.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wake_gpio_pin</td><td>LHL GPIO pin number. Range WICED_P00 to WICED_P39. If application does not need to support wake using GPIO, it shall use WICED_HAL_GPIO_PIN_UNUSED. if pin is not LHL pin, device can wake only after wakeup_time. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wake_active_mode</td><td>Positive edge trigger or negative edge trigger wake can be configured using WICED_GPIO_ACTIVE_HIGH or WICED_GPIO_ACTIVE_LOW respectively.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>WICED_ABORTED if HID off sleep aborts. Never returns if HID off sleep configure success.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>API must be called without any Bluetooth activity. </dd></dl>

</div>
</div>
<a class="anchor" id="ga7a0afec9e88e0688a90aba2eee780857"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__sleep__enums.html#ga46069887a0627072cdde146f6ee18e38">wiced_sleep_boot_type_t</a> wiced_sleep_get_boot_mode </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This API is used request the type of reboot. </p>
<p>A device is said to cold boot if it is booting from power up or HID-Off mode whereas the device is going through a fast boot if it is booting from shutdown sleep</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>wiced_sleep_boot_type_t</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This API is not used for CYW20819 as it doesn't support shutdown sleep </dd></dl>

</div>
</div>
<a class="anchor" id="ga8a9297d408f3a58cf3c476e9e6d924d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__group__sleep__enums.html#ga00880bca9f065d09a259eab6b4f98deb">wiced_sleep_wake_reason_t</a> wiced_sleep_hid_off_wake_reason </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>API to get reset reason. </p>
<p>returns the reason for wakeup</p>
<dl class="section return"><dt>Returns</dt><dd>wiced_reset_reason_t: Reason for wakeup </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright Infineon Technologies.</li>
  </ul>
</div>
</body>
</html>
