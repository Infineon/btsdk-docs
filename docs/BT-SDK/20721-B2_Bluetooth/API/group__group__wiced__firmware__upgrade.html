<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>AIROC&trade; CYW20721: AIROC Firmware Upgrade</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea" style="font-family:verdana;">
    <table border='0' cellpadding='0' cellspacing='0' width="98%">
      <tr style="height:20px"><td>&nbsp;</td></tr>
      <tr style="border-collapse: collapse; padding: 0;">
        <td style="width:20px"></td>
        <td style="width:117px"><img src="IFX_LOGO_RGB.png" alt="Infineon Logo" /></td>
        <td style="width:40px"></td>
        <td style="vertical-align:middle; text-align:left; font: bold 25px/100% Verdana, Arial, Helvetica, sans-serif;">
        AIROC<sup><font size="-1">&trade;</font></sup> BTSDK v3.2 - Documentation
        </td>
        <td style="width:20px"></td>
      </tr>
      <tr><td>&nbsp;</td></tr>
    </table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Home</span></a></li>
      <li><a href="modules.html"><span>Components</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__group__wiced__firmware__upgrade.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">AIROC Firmware Upgrade<div class="ingroups"><a class="el" href="group__wicedsys.html">AIROC System</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwiced__fw__upgrade__nv__loc__len__t.html">wiced_fw_upgrade_nv_loc_len_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwiced__bt__application__id__t.html">wiced_bt_application_id_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga234391a9f4e5dc23f1723b6557ca412a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga234391a9f4e5dc23f1723b6557ca412a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>OTA_FW_UPGRADE_CHUNK_SIZE_TO_COMMIT</b>&#160;&#160;&#160;512</td></tr>
<tr class="separator:ga234391a9f4e5dc23f1723b6557ca412a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga22f57be793eff4382f54f0bc0fdfb953"><td class="memItemLeft" align="right" valign="top">wiced_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__wiced__firmware__upgrade.html#ga22f57be793eff4382f54f0bc0fdfb953">wiced_firmware_upgrade_init</a> (<a class="el" href="structwiced__fw__upgrade__nv__loc__len__t.html">wiced_fw_upgrade_nv_loc_len_t</a> *p_sflash_nv_loc_len, uint32_t sflash_size)</td></tr>
<tr class="memdesc:ga22f57be793eff4382f54f0bc0fdfb953"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the AIROC Firmware Upgrade module.  <a href="#ga22f57be793eff4382f54f0bc0fdfb953">More...</a><br /></td></tr>
<tr class="separator:ga22f57be793eff4382f54f0bc0fdfb953"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27fc916ae66e079b3459f1e553999f09"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__wiced__firmware__upgrade.html#ga27fc916ae66e079b3459f1e553999f09">wiced_firmware_upgrade_init_nv_locations</a> (void)</td></tr>
<tr class="memdesc:ga27fc916ae66e079b3459f1e553999f09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes NV locations.  <a href="#ga27fc916ae66e079b3459f1e553999f09">More...</a><br /></td></tr>
<tr class="separator:ga27fc916ae66e079b3459f1e553999f09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4433b3bf0f43473881496851ba1fdf9d"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__wiced__firmware__upgrade.html#ga4433b3bf0f43473881496851ba1fdf9d">wiced_firmware_upgrade_store_to_nv</a> (uint32_t offset, uint8_t *<a class="el" href="wiced__bt__mesh__provision_8h.html#aa86e1085c6a16f60258f29c9d5fc2144">data</a>, uint32_t <a class="el" href="wiced__bt__gatt_8h.html#a5723e60ffd628510c699eddbce90be23">len</a>)</td></tr>
<tr class="memdesc:ga4433b3bf0f43473881496851ba1fdf9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stores a memory chunk to memory.  <a href="#ga4433b3bf0f43473881496851ba1fdf9d">More...</a><br /></td></tr>
<tr class="separator:ga4433b3bf0f43473881496851ba1fdf9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafc75a6dab6803a4ea2ec5418f696b8c3"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__wiced__firmware__upgrade.html#gafc75a6dab6803a4ea2ec5418f696b8c3">wiced_firmware_upgrade_retrieve_from_nv</a> (uint32_t offset, uint8_t *<a class="el" href="wiced__bt__mesh__provision_8h.html#aa86e1085c6a16f60258f29c9d5fc2144">data</a>, uint32_t <a class="el" href="wiced__bt__gatt_8h.html#a5723e60ffd628510c699eddbce90be23">len</a>)</td></tr>
<tr class="memdesc:gafc75a6dab6803a4ea2ec5418f696b8c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a memory chunk from memory.  <a href="#gafc75a6dab6803a4ea2ec5418f696b8c3">More...</a><br /></td></tr>
<tr class="separator:gafc75a6dab6803a4ea2ec5418f696b8c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0503e75b0d97d7b7b00940cfa472861a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__wiced__firmware__upgrade.html#ga0503e75b0d97d7b7b00940cfa472861a">wiced_firmware_upgrade_finish</a> (void)</td></tr>
<tr class="memdesc:ga0503e75b0d97d7b7b00940cfa472861a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves a memory chunk from memory.  <a href="#ga0503e75b0d97d7b7b00940cfa472861a">More...</a><br /></td></tr>
<tr class="separator:ga0503e75b0d97d7b7b00940cfa472861a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga727cb6e7242599b5958a1840b63ceb44"><td class="memItemLeft" align="right" valign="top">wiced_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__group__wiced__firmware__upgrade.html#ga727cb6e7242599b5958a1840b63ceb44">wiced_get_current_app_id_and_version</a> (<a class="el" href="structwiced__bt__application__id__t.html">wiced_bt_application_id_t</a> *app_id_and_version)</td></tr>
<tr class="memdesc:ga727cb6e7242599b5958a1840b63ceb44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves application version information from nvram.  <a href="#ga727cb6e7242599b5958a1840b63ceb44">More...</a><br /></td></tr>
<tr class="separator:ga727cb6e7242599b5958a1840b63ceb44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga0503e75b0d97d7b7b00940cfa472861a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wiced_firmware_upgrade_finish </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a memory chunk from memory. </p>
<p>The application calls this function after download is completed and verified, to switch active partitions with the one that received a new image. </p>

</div>
</div>
<a class="anchor" id="ga22f57be793eff4382f54f0bc0fdfb953"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wiced_bool_t wiced_firmware_upgrade_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structwiced__fw__upgrade__nv__loc__len__t.html">wiced_fw_upgrade_nv_loc_len_t</a> *&#160;</td>
          <td class="paramname"><em>p_sflash_nv_loc_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>sflash_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the AIROC Firmware Upgrade module. </p>
<p>Called by the application during initialization to initialize the upgrade module with serial flash offsets.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">p_sflash_nv_loc_len</td><td>Offsets of different sections present in serial flash. </td></tr>
    <tr><td class="paramname">sflash_size</td><td>Serial flash size present on the tag board (default size 4MB ). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga27fc916ae66e079b3459f1e553999f09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wiced_firmware_upgrade_init_nv_locations </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes NV locations. </p>
<p>The application calls this function during a start of firmware download to set up memory locations depending on which partition is being used. </p>

</div>
</div>
<a class="anchor" id="gafc75a6dab6803a4ea2ec5418f696b8c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wiced_firmware_upgrade_retrieve_from_nv </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves a memory chunk from memory. </p>
<p>The application calls this function when an upgrade process is completed to verify data was successfully stored. The application does not need to know which type of memory is used or which partition is being upgraded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>Offset in the memory to retrieve data from. </td></tr>
    <tr><td class="paramname">data</td><td>The pointer to the location to retrieve data. </td></tr>
    <tr><td class="paramname">len</td><td>The size of a memory chunk to retrieve. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga4433b3bf0f43473881496851ba1fdf9d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t wiced_firmware_upgrade_store_to_nv </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stores a memory chunk to memory. </p>
<p>The application can call this function to store a next memory chunk in none-volatile memory. The application does not need to know which type of memory is used or which partition is being upgraded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">offset</td><td>Offset in the memory to store data. </td></tr>
    <tr><td class="paramname">data</td><td>The pointer to a chunk of data to store. </td></tr>
    <tr><td class="paramname">len</td><td>The size of a memory chunk to store. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga727cb6e7242599b5958a1840b63ceb44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wiced_bool_t wiced_get_current_app_id_and_version </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structwiced__bt__application__id__t.html">wiced_bt_application_id_t</a> *&#160;</td>
          <td class="paramname"><em>app_id_and_version</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves application version information from nvram. </p>
<p>The application calls this function to retrieve the appplication id and version to compare with the downloaded image. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright Infineon Technologies.</li>
  </ul>
</div>
</body>
</html>
